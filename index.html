<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>File Upload and Preview</title>
    <style>
      .preview-container {
        width: 100%;
        height: 800px;
        border: 1px solid black;
        margin-top: 20px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>File Upload and Preview</h1>
    <form>
      <input type="file" id="fileInput">
      <input type="submit" value="Upload">
    </form>
    <div class="preview-container">
      <embed id="preview" src="" width="100%" height="100%">
    </div>
    <script>
      const form = document.querySelector("form");
      const fileInput = document.querySelector("#fileInput");
      const preview = document.querySelector("#preview");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => {
          preview.src = reader.result;
          setCookie("filePreview", reader.result, 3);
        };
      });

      window.onload = () => {
        const cookie = getCookie("filePreview");
        if (cookie) {
          preview.src = cookie;
        }
      };

      function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
      }

      function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(";");
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == " ") c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
      }
    </script>
  </body>
</html>

